(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){},22:function(e,t,a){e.exports=a(33)},28:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(19),s=a.n(o),r=a(36),c=a(34),l=a(35),m=(a(28),a(12)),u=a(7),d=a(8),h=a(11),p=a(9),f=a(10),g=a(2),b=a(20),E=a.n(b),v=a(13),O=a.n(v),y=(a(17),a(37)),j=(a(18),a(21)),k=a.n(j),S=function(e){return console.error(e)},N=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={username:"",password:"",redirect:!1},e.handleSubmit=e.handleSubmit.bind(Object(g.a)(Object(g.a)(e))),e.handleChange=e.handleChange.bind(Object(g.a)(Object(g.a)(e))),e.addNotification=e.addNotification.bind(Object(g.a)(Object(g.a)(e))),e.responseFacebook=e.responseFacebook.bind(Object(g.a)(Object(g.a)(e))),e.notificationDOMRef=i.a.createRef(),e.onSuccess=e.onSuccess.bind(Object(g.a)(Object(g.a)(e))),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"onSuccess",value:function(e){var t=this;fetch("https://stormy-garden-45401.herokuapp.com/githubAuth/access_token?code=".concat(e.code),{method:"GET"}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.token),t.addNotification(e.status,e.message),t.setState({redirect:!0})}).catch(console.log)}},{key:"responseFacebook",value:function(e){var t=this;fetch("https://stormy-garden-45401.herokuapp.com/facebook/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.accessToken)}}).then(function(e){return e.json()}).then(function(e){localStorage.setItem("token",e.token),t.addNotification(e.status,e.message),t.setState({redirect:!0})}).catch(console.log)}},{key:"addNotification",value:function(e,t){this.notificationDOMRef.current.addNotification({title:"Result:",message:t,type:e,insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3},dismissable:{click:!0}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new Headers;a.append("Content-Type","application/json"),fetch("https://stormy-garden-45401.herokuapp.com/auth/login",{method:"POST",headers:a,body:JSON.stringify({username:this.state.username,password:this.state.password})}).then(function(e){return e.json()}).then(function(e){"danger"===e.status?t.addNotification(e.status,"Error while logging in"):(localStorage.setItem("token",e.token),t.setState({redirect:!0}))}).catch(console.log)}},{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return this.state.redirect?i.a.createElement(y.a,{to:"/user"}):i.a.createElement("div",null,i.a.createElement(O.a,{ref:this.notificationDOMRef}),i.a.createElement("div",{className:"login-page"},i.a.createElement("div",{className:"form"},i.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},i.a.createElement("input",{type:"text",onChange:this.handleChange,placeholder:"username",required:!0,name:"username"}),i.a.createElement("input",{type:"password",onChange:this.handleChange,placeholder:"password",required:!0,name:"password"}),i.a.createElement("button",{type:"submit",value:"Submit"},"login"),i.a.createElement("p",{className:"message"},"Not registered?"," ",i.a.createElement(c.a,{to:"/signup"},"Create an account"))))),i.a.createElement("div",{style:{textAlign:"center"},className:"socials"},i.a.createElement("div",null,i.a.createElement(E.a,{appId:"1163777134010544",fields:"name,email,picture",callback:this.responseFacebook})),i.a.createElement("div",null,i.a.createElement("span",{style:{transition:"opacity 0.5s ease 0s"}},i.a.createElement(k.a,{clientId:"ed4f0f433db3e37aa087",redirectUri:"https://stormy-garden-45401.herokuapp.com/githubAuth/return",onSuccess:this.onSuccess,onFailure:S,className:"kep-login-github metro"})))))}}]),t}(n.Component),w=(a(32),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={firstname:"",lastname:"",username:"",imageURL:""},e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");fetch("https://stormy-garden-45401.herokuapp.com/user/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){e.setState({firstname:t.firstname,lastname:t.lastname,imageURL:t.imageURL,username:t.username})}).catch(console.log)}},{key:"render",value:function(){return i.a.createElement("article",{className:"card"},i.a.createElement("header",{style:{backgroundImage:"url(".concat(this.state.imageURL,")")},className:"card-header"}),i.a.createElement("div",{className:"card-body"},i.a.createElement("p",{className:"date"},"Firstname:"," ",this.state.firstname),i.a.createElement("p",{className:"date"},"Lastname:"," ",this.state.lastname),i.a.createElement("h2",null,this.state.username)))}}]),t}(n.Component)),C=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={firstname:"",lastname:"",username:"",password:"",redirect:!1},e.handleSubmit=e.handleSubmit.bind(Object(g.a)(Object(g.a)(e))),e.handleChange=e.handleChange.bind(Object(g.a)(Object(g.a)(e))),e.addNotification=e.addNotification.bind(Object(g.a)(Object(g.a)(e))),e.notificationDOMRef=i.a.createRef(),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"addNotification",value:function(e,t){this.notificationDOMRef.current.addNotification({title:"Result:",message:t,type:e,insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3},dismissable:{click:!0}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=new Headers;a.append("Content-Type","application/json"),fetch("https://stormy-garden-45401.herokuapp.com/auth/register",{method:"POST",headers:a,body:JSON.stringify({lastname:this.state.lastname,firstname:this.state.firstname,username:this.state.username,password:this.state.password})}).then(function(e){return e.json()}).then(function(e){t.addNotification(e.status,e.message),setTimeout(function(){t.setState({redirect:!0})},1e3)}).catch(console.log)}},{key:"handleChange",value:function(e){this.setState(Object(m.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return this.state.redirect?i.a.createElement(y.a,{to:"/"}):i.a.createElement("div",{className:"login-page"},i.a.createElement(O.a,{ref:this.notificationDOMRef}),i.a.createElement("div",{className:"form"},i.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},i.a.createElement("input",{type:"text",onChange:this.handleChange,required:!0,placeholder:"username",name:"username"}),i.a.createElement("input",{type:"text",onChange:this.handleChange,required:!0,placeholder:"firstname",name:"firstname"}),i.a.createElement("input",{type:"text",onChange:this.handleChange,required:!0,placeholder:"lastname",name:"lastname"}),i.a.createElement("input",{type:"password",onChange:this.handleChange,required:!0,placeholder:"password",name:"password"}),i.a.createElement("button",{type:"submit"},"Sign Up"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=i.a.createElement(r.a,{basename:"/passport-token"},i.a.createElement("div",null,i.a.createElement("div",{className:"header"},i.a.createElement("div",null,i.a.createElement(c.a,{to:"/"},"Home")),i.a.createElement("div",null,i.a.createElement(c.a,{to:"/user"},"User")),i.a.createElement("div",null,i.a.createElement(c.a,{to:"/signup"},"Sign Up"))),i.a.createElement(l.a,{exact:!0,path:"/",component:N}),i.a.createElement(l.a,{exact:!0,path:"/user",component:w}),i.a.createElement(l.a,{exact:!0,path:"/signup",component:C})));s.a.render(R,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.d229cb62.chunk.js.map